<!DOCTYPE html>
<html lang="su">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dong√©ng Babad Desa Mekarmulya</title>
  <style>
    :root{
      --bg1:#0f172a;
      --bg2:#1f2937;
      --accent:#f59e0b;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --panel:#111827f2;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica Neue, Arial;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, #1e293b 0%, #0b1220 35%, #060912 100%) fixed;
    }
    .wrap{display:grid; place-items:center; min-height:100%; padding:20px}
    .book{
      width:min(100%, 900px);
      min-height:560px;
      background:linear-gradient(180deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.02) 100%);
      border:1px solid rgba(255,255,255,.08);
      border-radius:24px; 
      overflow:hidden;
      box-shadow: 0 30px 60px rgba(0,0,0,.5);
      position:relative;
    }
    .header{
      display:flex; align-items:center; gap:12px; padding:14px 18px; border-bottom:1px solid rgba(255,255,255,.06);
      background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    }
    .badge{font-size:12px; padding:4px 10px; border:1px solid rgba(255,255,255,.14); border-radius:999px; color:#fde68a; background:rgba(245, 158, 11, .08)}
    .title{font-weight:700; letter-spacing:.5px}
    .subtitle{margin-left:auto; font-size:12px; color:var(--muted)}

    .stage{
      position:relative; height:400px; display:flex; align-items:flex-end; justify-content:center;
      background: #111827;
      overflow:hidden;
    }
    .illustration{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      opacity:.5;
    }
    .textbox{
      width:100%; max-width:880px; margin:0 auto 18px; padding:16px 18px 18px; 
      background: rgba(8, 13, 24, .72);
      border:1px solid rgba(255,255,255,.08); border-radius:18px;
      backdrop-filter: blur(6px);
      position:relative;
      z-index:1;
    }
    .nameplate{font-size:14px; color:#fde68a; font-weight:700; letter-spacing:.6px}
    .text{margin-top:6px; font-size:18px; line-height:1.7}
    .controls{display:flex; align-items:center; gap:10px; padding:12px 18px; border-top:1px solid rgba(255,255,255,.06)}
    .btn{appearance:none; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600}
    .btn:hover{background:rgba(255,255,255,.08)}
    .btn:disabled{opacity:.4; cursor:not-allowed}
    .progress{height:8px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden; flex:1}
    .bar{height:100%; width:0%; background:linear-gradient(90deg, #f59e0b, #fbbf24)}
    .footer{padding:10px 18px; font-size:12px; color:var(--muted); display:flex; justify-content:space-between}
    .kbd{border:1px solid rgba(255,255,255,.16); padding:2px 6px; border-radius:6px; font-size:11px}
    .cursor{ display:inline-block; width:1ch; animation: blink 1s steps(1) infinite; }
    @keyframes blink{ 50%{ opacity:0; } }
    @media (max-width:680px){
      .stage{height:360px}
      .text{font-size:16px}
    }
    @media print{
      body{background:white; color:black}
      .book{box-shadow:none; border:1px solid #ddd}
      .controls, .footer {display:none}
      .stage{height:auto}
      .textbox{background:white; border:1px solid #ddd}
      .nameplate{color:#7c2d12}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="book">
      <div class="header">
        <span class="badge">E-Book | Visual Novel</span>
        <div class="title">Dong√©ng Babad Desa Mekarmulya</div>
        <div class="subtitle" id="chapter">Bab 1 / 6</div>
      </div>

      <div class="stage">
        <div class="illustration" id="illustration"></div>
        <div class="textbox">
          <div class="nameplate" id="speaker">Juru Carita</div>
          <div class="text" id="line">‚ÄÜ</div>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="btnPrev">‚üµ Sateuacanna</button>
        <button class="btn" id="btnNext">Salajengna ‚ü∂</button>
        <div class="progress"><div class="bar" id="bar"></div></div>
        <button class="btn" id="btnPrint">üñ®Ô∏è Cetak</button>
      </div>

      <div class="footer">
        <div>Bahasa: Sunda | Mode: Naratif</div>
        <div><span class="kbd">Space</span> / <span class="kbd">Enter</span> salajengna ‚Ä¢ <span class="kbd">‚Üê‚Üí</span> navigasi</div>
      </div>
    </div>
  </div>

  <script>
    const scenes = [
      { speaker: "Juru Carita", text: "Baheula, kira-kira taun dalapan puluh-an, di hiji leuweung nu k√©n√©h rapet tatangkalan, aya kampung alit ngaranna Tembongrea.", img: "https://picsum.photos/id/1018/900/400" },
      { speaker: "Juru Carita", text: "Kampung Tembongrea kagolong kana wewengkon Bilisuk. Lantaran jauh ti puseur d√©sa, loba urusan nu karasa h√©s√© ku warga.", img: "https://picsum.photos/id/1015/900/400" },
      { speaker: "Juru Carita", text: "Aya saurang kuwu wijaksana, ngaranna Alwi Sastra Miharja. Anjeunna mikir: ‚ÄòWarga Tembongrea butuh pangurus deukeut. Kumaha mun kampung ieu dimekarkeun jadi d√©sa sorangan?‚Äô", img: "https://picsum.photos/id/1011/900/400" },
      { speaker: "Juru Carita", text: "Usul √©ta ditarima. Ku sauyunan warga, lahirlah d√©sa anyar dingaranan Mekarmulya ‚Äî ‚Äòmekar‚Äô tandana tumuwuh ngembang, ‚Äòmulya‚Äô tandana rahayu jeung kasajahteraan.", img: "https://picsum.photos/id/1016/900/400" },
      { speaker: "Juru Carita", text: "Ti harita, Mekarmulya ngalaman kamajuan: lahan tatan√©n beuki subur, warga beuki kompak, jeung unggal taun aya l√©ngkah anyar nu ngajurung kamajuan d√©sa.", img: "https://picsum.photos/id/1020/900/400" },
      { speaker: "Juru Carita", text: "Carita babad ieu diwariskeun ti kolot ka incu supaya urang Mekarmulya inget kana asal-muasalna, sarta salawasna ngajaga silih asih, silih asah, jeung silih asuh.", img: "https://picsum.photos/id/1019/900/400" }
    ];

    const elLine = document.getElementById('line');
    const elSpeaker = document.getElementById('speaker');
    const elBar = document.getElementById('bar');
    const elChapter = document.getElementById('chapter');
    const elIllust = document.getElementById('illustration');
    const btnPrev = document.getElementById('btnPrev');
    const btnNext = document.getElementById('btnNext');
    const btnPrint = document.getElementById('btnPrint');

    let i = 0;
    let typing = false;
    let fullTextCache = '';

    function setProgress(){
      const pct = ((i+1)/scenes.length)*100;
      elBar.style.width = pct + '%';
      elChapter.textContent = `Bab ${i+1} / ${scenes.length}`;
    }

    function setScene(idx){
      i = Math.max(0, Math.min(idx, scenes.length-1));
      elSpeaker.textContent = scenes[i].speaker;
      elIllust.style.backgroundImage = `url(${scenes[i].img})`;
      typeText(scenes[i].text);
      setProgress();
      btnPrev.disabled = (i===0);
      btnNext.textContent = (i===scenes.length-1)? 'Tamat ‚Äì Balik deui' : 'Salajengna ‚ü∂';
    }

    function typeText(text){
      typing = true;
      fullTextCache = text;
      elLine.innerHTML = '';
      let pos = 0;
      const speed = 22;
      function step(){
        if(pos <= text.length){
          elLine.innerHTML = text.slice(0, pos) + '<span class="cursor">‚ñå</span>';
          pos++;
          requestAnimationFrame(()=> setTimeout(step, speed));
        } else {
          typing = false;
          elLine.textContent = text;
        }
      }
      step();
    }

    function next(){
      if(typing){ typing = false; elLine.textContent = fullTextCache; return; }
      if(i === scenes.length-1){ setScene(0); return; }
      setScene(i+1);
    }
    function prev(){
      if(typing){ typing = false; elLine.textContent = fullTextCache; return; }
      setScene(i-1);
    }

    btnNext.addEventListener('click', next);
    btnPrev.addEventListener('click', prev);
    btnPrint.addEventListener('click', ()=> window.print());
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowRight' || e.key === 'Enter' || e.key === ' '){ e.preventDefault(); next(); }
      if(e.key === 'ArrowLeft'){ e.preventDefault(); prev(); }
    });

    setScene(0);
  </script>
</body>
</html>
